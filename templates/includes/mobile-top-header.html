<ul class="list-inline mb-0">

  <!-- ===================== MOBILE SEARCH ICON & DROPDOWN ===================== -->
  <li class="list-inline-item">
    <a class="text-black nav-link d-block d-lg-none"
       href="#"
       id="mobile-search"
       data-toggle="dropdown"
       aria-haspopup="true"
       aria-expanded="false">
      <div class="text-center">
        <!-- Search Icon -->
        <div><i class="fas fa-search fa-lg"></i></div>
        <p class="my-0">Search</p>
      </div>
    </a>

    <!-- Search dropdown containing search form -->
    <div class="dropdown-menu border-0 w-100 p-3 rounded-0 my-0" role="navigation" aria-labelledby="mobile-search">
          <form class="form" method="GET" action="{{ products_index_url }}">
        <div class="input-group w-100">
          <!-- Search input box -->
          <input class="form-control border border-black rounded-0"
                 type="text" name="q" placeholder="Search our site">

          <!-- Search button -->
          <div class="input-group-append">
            <button class="form-control btn btn-black border border-black rounded-0" type="submit">
              <span class="icon"><i class="fas fa-search"></i></span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </li>

  <!-- ===================== MOBILE USER ACCOUNT DROPDOWN ===================== -->
  <li class="list-inline-item dropdown">
    <a class="text-black nav-link d-block d-lg-none"
       href="#"
       id="user-options-mobile"
       data-toggle="dropdown"
       aria-haspopup="true"
       aria-expanded="false">
      <div class="text-center">
        <!-- User Icon -->
        <div><i class="fas fa-user fa-lg"></i></div>
        <p class="my-0">My Account</p>
      </div>
    </a>

    <!-- Dropdown menu for logged-in or logged-out state -->
    <div class="dropdown-menu border-0" aria-labelledby="user-options-mobile">

      {% if request.user.is_authenticated %}

        <!-- SUPERUSER: Product management link -->
        {% if request.user.is_superuser %}
          <a href="{% url 'products:add_product' %}" class="dropdown-item">Product Management</a>
        {% endif %}

        <!-- Normal users: Profile link -->
        <a href="{% url 'profiles:profile' %}" class="dropdown-item">My Profile</a>

        <!-- Logout form -->
        <form method="post" action="{% url 'account_logout' %}">
          {% csrf_token %}
          <button type="submit" class="dropdown-item">Logout</button>
        </form>

      {% else %}

        <!-- Unauthenticated user: registration and login -->
        <a href="{% url 'account_signup' %}" class="dropdown-item">Register</a>
        <a href="{% url 'account_login' %}" class="dropdown-item">Login</a>

      {% endif %}
    </div>
  </li>

  <!-- ===================== MOBILE SHOPPING BAG / CART LINK ===================== -->
  <li class="list-inline-item">
    <a class="{% if grand_total %}text-primary font-weight-bold{% else %}text-black{% endif %} nav-link d-block d-lg-none"
       href="{% url 'bag:view_bag' %}">
      <div class="text-center">
        <!-- Shopping Bag Icon -->
        <div><i class="fas fa-shopping-bag fa-lg"></i></div>

        <!-- Display dynamic grand total price -->
        <p class="my-0">
          {% if grand_total %}
            €{{ grand_total|floatformat:2 }}
          {% else %}
            €0.00
          {% endif %}
        </p>
      </div>
    </a>
  </li>

</ul>
